/*! Copyright (c) ZUIKU.COM - Author: LIJUN - Email: zwlijun@gmail.com */
define(function(require,exports,module){function a(a,b,c){b=b.replace(/\[\d+\]/,""),c=c||{};var d=c.args||[];c.args=[a,b].concat(d),a in o?o[a].apply(null,[c]):k.execHandler(c)}function b(a,b){var c=l.parseURL(a),d=c.host,e=c.pathname,f=d+e;m.Session.set(f,l.stringify(b)),c=null}function c(a){var b=l.parseURL(a||document.URL),c=b.host,d=b.pathname,e=c+d,f=m.Session.get(e),g=l.serialized(f);return g}function d(a){$.extend(!0,q,a)}function e(a){$.extend(!0,o,a)}function f(a){var b=a.split("."),c=b[0],d=b[1],e=b[2],f=!1;try{var g=q[c][d][e];f=g?!0:!1}catch(h){f=!1}finally{return f}}function g(a){var b={};return b=$.extend(!0,b,a)}function h(a,b){var c=null,d=a.split("."),e=d[0],h=d[1],i=d[2];if(!f(a))throw new Error("unknown command ("+a+")!");return c=g(q[e][h][i]),c.data=k.formatData(c.data||"",b||null),c}function i(a,b){a.traditional=b.traditional||!0,a.type=b.type||a.method,a=$.extend(!0,a,b),a.xhrFields=b.xhrFields||{},!0===a.cross&&(a.xhrFields.withCredentials=!0);var c=a.beforeSend,d=a.complete,e=function(a,b){!1!==this.showLoading&&n.show(this.loadingText||"加载中..."),c&&c.apply(this,[a,b]),c=null};a.beforeSend=e;var f=function(a,b){!1!==this.showLoading&&n.hide(),d&&d.apply(this,[a,b]),d=null};a.complete=f,$.ajax(a)}function j(a,c,d){var e=h(a,c||null);if(null==e)throw new Error("unknown command("+a+")");switch(e.dataType){case p.J:case p.P:case p.T:i(e,d);break;case p.R:b(e.url,l.serialized(e.data)),(void 0===e.append||"auto"==e.append||!0===e.append)&&l.append(e.url,e.data),!0===e.spa||(!0===e.replace?location.replace(e.url):location.href=e.url);break;default:throw new Error("unknown response type("+e.dataType+")!")}}var k=$.Util=require("mod/se/util.f9a416ff84aa85b8ba737234874f8969ce70e034"),l=$.Request=require("mod/se/request.1352bd5b69b6d8a3f6c80e6a62b39695c0f336ee"),m=$.Storage=require("mod/se/storage.68fee00462a8c845f140085fcf156a09a744f7d2"),n=$.Loading=require("mod/se/loading.9e1c5d3e500e9e91c07ba74ded362495e6fc62c8"),o={},p={J:"json",P:"jsonp",T:"text",R:"redirect"},q={};module.exports={exec:j,existCommand:f,fireError:a,setRequestInfo:b,getRequestInfo:c,injectCommands:d,injectErrorInfo:e,ResponseTypes:p}});
