function initialize(){var e=new google.maps.LatLng(51.516257,-0.14109),t=new google.maps.LatLng(51.516257,-0.152227),n=new google.maps.StyledMapType([{featureType:"all",elementType:"all",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"transit.station",elementType:"all",stylers:[{visibility:"on"}]}],{name:"Greyscale"});contact_map=new google.maps.Map(document.getElementById("map"),{zoom:15,center:t,panControl:!1,zoomControl:!1,scaleControl:!1,streetViewControl:!1,mapTypeControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP});contact_map.mapTypes.set("greyscale",n);contact_map.setMapTypeId("greyscale");var r=new google.maps.Marker({position:e,map:contact_map})}if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)){var viewportmeta=document.querySelectorAll('meta[name="viewport"]')[0];if(viewportmeta){viewportmeta.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0";document.body.addEventListener("gesturestart",function(){viewportmeta.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"},!1)}}var contact_map;$.fn.doWelcome=function(){var e=$(this).data("effect"),t=parseInt($(this).data("speed")),n=parseInt($(this).data("duration"));e=="slide"?n>0?$(this).show("slide",{direction:"right"},t).delay(n).hide("slide",{direction:"left"},t,function(){$(this).next().doWelcome()}):$(this).show("slide",{direction:"right"},t,function(){$(this).next().doWelcome()}):e=="fade"&&(n>0?$(this).show("fade",t).delay(n).hide("fade",t,function(){$(this).next().doWelcome()}):$(this).show("fade",t,function(){$(this).next().doWelcome()}));$(".homekeymouse").delay(4400).fadeIn(400);$(".homearrow").delay(7400).fadeIn(400)};(function(e){var t=window.History;e("#logo").delay(1200).fadeIn(800);e("#logo").next().delay(2e3).doWelcome();var n=e(".logo_trans_wht");n.hover(function(){e(this).stop().animate({opacity:"1"},{queue:!1,duration:400})},function(){e(this).stop().animate({opacity:"0.5"},{duration:400})});var r=e("#panel_wrap"),i=r.slideshownav({transition:"push(#{direction})",mode:"vertical",selector:".panel",navSelector:"#global_nav ul li a:not(.blog)",duration:600,autoPlay:!1}),s=i.data("slideshownav");r.bind("slideshownavclick",function(){s.options.transition="push(#{direction})";var e=s.current,t=s.navs[e].attr("href")});e(".next_panel").click(function(){s.show("next",{transition:"push(up)"});google.maps.event.trigger(contact_map,"resize");contact_map.setCenter(new google.maps.LatLng(51.516257,-0.152227));e("body").keyMouse();e("body").selectedWorks()});e(".prev_panel").click(function(t){s.show("previous",{transition:"push(down)"});google.maps.event.trigger(contact_map,"resize");contact_map.setCenter(new google.maps.LatLng(51.516257,-0.152227));e("body").selectedWorks();e("body").keyMouse()});shortcut.add("down",function(){s.show("next",{transition:"push(up)"});google.maps.event.trigger(contact_map,"resize");contact_map.setCenter(new google.maps.LatLng(51.516257,-0.152227));e("body").selectedWorks();e("body").keyMouse()});shortcut.add("up",function(){s.show("previous",{transition:"push(down)"});google.maps.event.trigger(contact_map,"resize");contact_map.setCenter(new google.maps.LatLng(51.516257,-0.152227));e("body").selectedWorks();e("body").keyMouse()});var o=0;e("body").mousewheel(function(t,n,r,i){if(o===0){o=1;setTimeout(function(){o=0},1400);if(n>0){s.show("previous",{transition:"push(down)"});google.maps.event.trigger(contact_map,"resize");contact_map.setCenter(new google.maps.LatLng(51.516257,-0.152227));e("body").selectedWorks();e("body").keyMouse()}else if(n<0){s.show("next",{transition:"push(up)"});google.maps.event.trigger(contact_map,"resize");contact_map.setCenter(new google.maps.LatLng(51.516257,-0.152227));e("body").selectedWorks();e("body").keyMouse()}}return!1},400);jQuery.fn.selectedWorks=function(){e(".selected-works-carousel").carouFredSel({circular:!0,infinite:!0,direction:"left",width:"100%",height:"100%",scroll:{items:1,width:"100%",height:"100%",duration:600,easing:"easeInOutQuad",onAfter:function(e,t){e.removeClass("on");t.eq(0).addClass("on")}},onCreate:function(e){e.eq(0).addClass("on")},auto:!1,prev:{button:".work-arrow.prev",key:"left"},next:{button:".work-arrow.next",key:"right"}});var t={width:e(window).width(),height:e(window).height()};e(".selected-works-carousel .project").css(t)};e("body").selectedWorks();e(window).resize(function(){var t={width:e(window).width(),height:e(window).height()};e(".selected-works-carousel .project").css(t)});jQuery.fn.keyMouse=function(){setTimeout(function(){e("#welcome").hasClass("rf-slideshownav-current")?e(".keymouse").fadeTo(400,0):e("#welcome").hasClass("rf-slideshownav-current")||e(".keymouse").fadeTo(400,1)},800)};var u,a=e(".slat").first().width();e(".slat").on("click",function(){var t=e(this),n=t.offset().top,r=t.position().left,i=t.width(),s=t.height();u={position:"absolute",width:i,height:s,left:r,"z-index":"9999"};expandedItem=t.clone();expandedItem.attr("id","popupWork");expandedItem.css(u).appendTo(".works-wrap");expandedItem.css({left:Math.abs(e(".works-wrap").position().left)+5,width:e(window).width()}).find(".siteinfo");e(".namebadge").css("opacity","0");e(".dotoverlay").css({opacity:"0"});e(".websitehoverstate").css({bottom:"-100px",opacity:"1",width:"800px","margin-left":"-400px"});e(".siteinfo").css({"z-index":"1100",opacity:"1"});e(".closecross").css("opacity","1");e(".slat").css("cursor","default");e(".siteinfo, .closecross").addClass("active").removeClass("actives");setTimeout(function(){expandedItem.find(".websiteshot").show().addClass("active")},300);e(".closecross, .backtoselected, .slatbg").on("click",function(){var t=u;t.width="11.5%";e("#popupWork").css("margin-left","40px");e(".namebadge").css("opacity","1");e(".dotoverlay").css({opacity:"1"});e(".websitehoverstate").css({bottom:"-500px",opacity:"0",width:"500px","margin-left":"-250px"});e(".siteinfo").css({"z-index":"-1100",opacity:"0"});e(".closecross").css("opacity","0");e(".slat").css("cursor","pointer");e(".siteinfo, .closecross").addClass("actives");e(".siteinfo, .closecross").removeClass("active");e("#popupWork .siteinfo").removeClass("active");e("#popupWork").css(t);setTimeout(function(){e("#popupWork").css({opacity:"0"});setTimeout(function(){e("#popupWork").remove()},50)},250)})});e(".top-bg-left, .top-bg-right").delay(2e3).animate({opacity:1},1200,"easeInOutQuart");e("#global_nav ul li a:not(.blog), .next_panel, .prev_panel").click(function(t){t.preventDefault();google.maps.event.trigger(contact_map,"resize");contact_map.setCenter(new google.maps.LatLng(51.516257,-0.152227));e("body").selectedWorks()});e(window).bind("statechange",function(){var e=t.getState(),n=e.url});e(".mapoverlay").click(function(){e(this).remove()})})(jQuery);(function(e){e(function(){e("img[data-src]").each(function(){e(this).attr("src",e(this).data("src"))})})})(jQuery);
